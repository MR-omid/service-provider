دلیل پیاده سازی نسخه جدید:

1 - قدیمی شدن نسخه مرورگر استفاده شده در پیاده سازی قبلی

2 - پشتیبانی نکردن از برخی سایتها و همچنین باز نکردن سایتهایی که از کپچای جدید گوگل استفاده میکردند مانند linkedin

3 - امکانات بسیار زیاد و کاربردی نسخه جدید

4 - عدم وجود نمونه پیاده سازی شده با نسخه جدید webkit chromium

مشکلات پیش آمده در زمان شرو پیاده سازی:

1 - نبود نمونه برای گرفتن ایده و پیاده سازی

2 - مستندات برای زبان پایتون وجود نداشت و فقط مستندات c++ موجود بود، در حالت کلی مشکلی نداشت اما بعضی معادل سازی ها به دلیل تعاریف متفاوت دو زبان از شی گرایی و کار با object ها نیاز به نرمال سازی و variation & type converting داشت

3 - برخی متدها مانند اجرای کدهای جاوا اسکریپت که بخش اصلی Hrobot را تشکیل میدهند مانند قبل همزمان نبودند و به صورت غیر همزمان طراحی شده بود که با طراحی EventLoop و ارسال signal حل شد.

4 - ارتباط بین پایتون و جاوا اسکریپت به صورت string برقرار بود و امکان دسترسی به object های یکدیگر را نداشتند که با پیاده سازی یک رابط برقرار شد اما وقت زیادی به دلیل وجود تعاریف متفاوت در دو زبان که باید مشترک میشد صرف شد.

5 - در برخی موارد باید رفتار کاربر مانند تایپ با کیبورد و موس شبیه سازی شود و نمیتوان با جاوا اسکریپت کلیک یا متنی را جایگذاری کرد

6 - متدهای کار با NodeList های DOM باید پیاده سازی شود

7 - متدهای کار با فرم، dropdown های انتخابی و دیگر موجودیت های یک صفحه وب باید پیاده سازی شود

8 - مدیریت خطاهای جاوا اسکریپت

تا این لحظه با این موارد برخورد کردم که بعضی حل شده و یا باید حل یا پیاده سازی شود.

موارد دیگری ممکن است در ادامه اضافه شود.







------------------------
در روند پیاده سازی hrobot بر پایه نسخه جدید QtWebEngine به مشکلی برخورد کردیم که ظاهرا در Qt هنوز برطرف نشده، البته در نسخه های تست ظاهرا برطرف شده اما تا زمان ارائه رسمی قابل استفاده نمیباشد و باید راه حل موقتی برای این موضوع تا زمان ارائه رسمی نسخه بعدی پیدا کرد.

مشکل در مشخص کردن شروع لود یک صفحه یا اسکریپت و پایان آن است، لینک ها معمولی هشکلی ندارند اما لینک ها جاوا اسکریپتی یا anchor لینک ها فقط متد شروع لود را فراخوانی میکنند اما متد پایان لود را فواخوانی نمیکنند.

راه حل های ساده زیادی برای رفع این موضوع وجود دارد، اما همیشه و در همه حال قابل اعتماد نیستند، حل صحیح این مشکل به این دلیل اهمیت زیادی دارد، چون پیاده سازی به صورت غیر همزامان باید انجام شود و اگر جایی با این مشکل برخورد کنیم و راه حل جواب ندهد، برنامه در حالت لودینگ باقی میماند، مگر اینکه صفحه را دوباره لود یا به صفحه دیگری برویم.

در حال حاظر روی یک راه حل دارم کار میکنم که به احتمال خیلی زیاد جواب میده، اما کمی زمان بر هست تا حالت های مختلف هندل بشه.

لینک باگ مورد بحث:

https://bugreports.qt.io/browse/QTBUG-65223